# Formatter Test Files

This directory contains test files for the Blazor formatter.

## Structure

- `Input/` - Contains unformatted files that serve as input to the formatter
- `ExpectedOutput/` - Contains the expected formatted output for each input file
- `ActualOutput/` - Contains the actual formatted output generated by tests (for manual inspection)

## Test Files

### RazorDirectives.razor
Tests the formatting of Razor directives including:
- `@page`
- `@rendermode` 
- `@attribute`
- `@using`
- `@inject`

✅ **Status**: Working correctly - all directives remain on single lines

### HtmlWithDoctype.html
Tests the formatting of HTML files with DOCTYPE declarations.

✅ **Status**: Working correctly - DOCTYPE is preserved on a single line

### ComplexComponent.razor
Tests formatting of a complex Blazor component with:
- Multiple directives
- If/else blocks
- Foreach loops
- Nested HTML elements
- Code blocks

⚠️ **Status**: Minor differences in text content formatting within if blocks

### MixedContent.razor
Tests formatting of mixed HTML and Razor content with:
- DOCTYPE declaration
- Razor directives inside HTML body
- Razor expressions in attributes
- Complex nesting

⚠️ **Status**: Known issue with element parsing after DOCTYPE in certain cases

## Running Tests

```bash
cd BlazorLore.Format.Core.Tests
dotnet test
```

To run specific tests:
```bash
dotnet test --filter "Format_ShouldMatchExpectedOutput"
```

## Adding New Tests

1. Add an input file to `Input/`
2. Add the expected output to `ExpectedOutput/` with the same filename
3. The test will automatically pick up the new files

## Reviewing Failures

When a test fails, the error message will show the exact difference between expected and actual output. The actual formatted output is automatically saved to `ActualOutput/` for manual inspection.

### Comparing Outputs

Use the provided comparison scripts to easily see differences:

**Windows (PowerShell):**
```powershell
# Compare all files
.\compare-outputs.ps1

# Compare specific file
.\compare-outputs.ps1 -FileName "ComplexComponent.razor"
```

**Linux/Mac (Bash):**
```bash
# Compare all files
./compare-outputs.sh

# Compare specific file
./compare-outputs.sh ComplexComponent.razor
```

### Manual Formatting

You can also run the formatter manually on any input file:

```bash
dotnet run --project ../BlazorLore.Format.Cli -- format TestFiles/Input/YourFile.razor
```

## Visual Studio Integration

The `ActualOutput` folder is included in the project file and will appear in Visual Studio's Solution Explorer. This makes it easy to:
- View the actual formatted output side-by-side with expected output
- Use Visual Studio's built-in diff tools to compare files
- Quickly identify formatting differences